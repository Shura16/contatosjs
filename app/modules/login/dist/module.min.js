!function(){"use strict";function a(a){a.when("/login",{templateUrl:"modules/login/views/login.html",controller:"LoginCtrl"}).when("/logout",{templateUrl:"modules/login/views/login.html",controller:"LoginCtrl"})}function b(a,b,c,d){a.infoMessages=[],a.errorMessages=[],a.sucessMessages=[],a.globals=c.get("globals")||{},a.globals.currentUser&&(d.defaults.headers.common.Authorization="Basic "+a.globals.currentUser.authdata),a.$on("$locationChangeStart",function(c,d,e){"/login"===b.path()||a.globals.currentUser||b.path("/login")})}angular.module("contatosJS.login",[]),angular.module("contatosJS.login").config(a).run(b),a.$inject=["$routeProvider"],b.$inject=["$rootScope","$location","$cookieStore","$http"]}(),function(){function a(a,b,c,d,e){function f(){d.clearCredentials()}a.login=function(){d.login(a.username,a.password,function(b){b.success?(d.setCredentials(b.user.login,b.user.password,b.user.name),c.path("/")):(a.messages.push({type:"alert-danger",text:b.message}),console.error(b.message))})},a.logout=function(){d.clearCredentials(),c.path("/login"),a.messages=[]},f()}angular.module("contatosJS.login").controller("LoginCtrl",a),a.$inject=["$scope","$rootScope","$location","LoginService"]}(),function(){function a(a,b,c,d){function e(a){var b,c,d,e,f,g="",h="",i="",j=0;do b=a.charCodeAt(j++),c=a.charCodeAt(j++),h=a.charCodeAt(j++),d=b>>2,e=(3&b)<<4|c>>4,f=(15&c)<<2|h>>6,i=63&h,isNaN(c)?f=i=64:isNaN(h)&&(i=64),g=g+this.keyStr.charAt(d)+this.keyStr.charAt(e)+this.keyStr.charAt(f)+this.keyStr.charAt(i),b=c=h="",d=e=f=i="";while(j<a.length);return g}function f(a){var b,c,d,e,f,g="",h="",i="",j=0,k=/[^A-Za-z0-9\+\/\=]/g;k.exec(a)&&window.alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");do d=this.keyStr.indexOf(a.charAt(j++)),e=this.keyStr.indexOf(a.charAt(j++)),f=this.keyStr.indexOf(a.charAt(j++)),i=this.keyStr.indexOf(a.charAt(j++)),b=d<<2|e>>4,c=(15&e)<<4|f>>2,h=(3&f)<<6|i,g+=String.fromCharCode(b),64!=f&&(g+=String.fromCharCode(c)),64!=i&&(g+=String.fromCharCode(h)),b=c=h="",d=e=f=i="";while(j<a.length);return g}function g(a,b,c){var e,f;d.getByLogin(a).then(function(a){f=a.data,e="undefined"==typeof f?{success:!1,message:"Usuário inexistente!"}:b==f.password?{success:!0,user:f}:{success:!1,message:"Usuário ou senha incorretos!"},c(e)})}function h(d,e,f){var g=d+":"+e;c.globals={currentUser:{username:d,name:f,authdata:g},loggedIn:!0},a.defaults.headers.common.Authorization="Basic "+g,b.put("globals",c.globals)}function i(){c.globals={},b.remove("globals"),a.defaults.headers.common.Authorization="Basic"}var j={};j.keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",j.encode=e,j.decode=f;var k={};return k.login=g,k.setCredentials=h,k.clearCredentials=i,k}angular.module("contatosJS.login").factory("LoginService",a),a.$inject=["$http","$cookieStore","$rootScope","Users"]}();